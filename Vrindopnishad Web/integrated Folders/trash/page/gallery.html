<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Vrindopnishad Gallery View</title>
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&family=Dancing+Script:wght@400;500;600;700&family=Laila:wght@300;400;500;600;700&family=Merriweather:wght@300;400;700&family=Prompt:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&family=Protest+Strike&display=swap" rel="stylesheet">
  <link href="/book/css/book.css" rel="stylesheet" type="text/css" />
  <link href="gallery.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="/book/css/content-loader.css">
  <link rel="stylesheet" href="/book/css/book.css">
  
  <!-- GSAP for animations -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  
  <!-- Content loader and notification system -->
  <script src="/book/js/content-loader.js"></script>
  <script src="/book/js/notification-manager.js"></script>
  
  <!-- Audio system -->
  <script src="/book/js/audio.js"></script>
  
  <!-- Security features -->
  <script src="/Security/disable-right-click.js" defer></script>
  <script src="/Security/screenshot-protection.js" defer></script>
  
  <script>
    // Initialize NotificationManager
    document.addEventListener('DOMContentLoaded', function() {
      // Enable notifications with sound
      if (window.NotificationManager) {
        window.NotificationManager.setSilent(false);
        window.NotificationManager.setAudio(true);
      }
      
      // Show welcome notification
      setTimeout(() => {
        if (window.NotificationManager) {
          window.NotificationManager.show('Welcome to Vrindopnishad Gallery! This content is protected.', 'info', {
            duration: 5000,
            appName: 'Gallery Security'
          });
        }
      }, 1000);
    });
  </script>
</head>
<body>
  <header class="gallery-header">
    <div class="header-content">
      <div class="logo">
        <i class="fas fa-book-open"></i>
        <h1>Vrindopnishad - Gallery</h1>
      </div>
      <div class="gallery-controls">
        <button class="gallery-control" id="back-to-book">
          <i class="fas fa-arrow-left"></i>
          <span>Back to Book</span>
        </button>
        <button class="gallery-control" id="toggle-theme">
          <i class="fas fa-moon"></i>
          <span>Theme</span>
        </button>
        <button class="gallery-control" id="share-gallery">
          <i class="fas fa-share-nodes"></i>
          <span>Share</span>
        </button>
        <button class="gallery-control" id="toggle-music">
          <i class="fas fa-music"></i>
          <span>Music</span>
        </button>
        <button class="gallery-control" id="toggle-security" title="Toggle content protection">
          <i class="fas fa-shield-alt"></i>
          <span>Protection</span>
        </button>
      </div>
    </div>
    <div class="gallery-progress">
      <div class="progress-bar" id="viewing-progress"></div>
    </div>
  </header>

  <main class="gallery-wrapper">
    <div class="gallery-sidebar">
      <h2>Contents</h2>
      <ul class="gallery-nav">
        <li class="gallery-nav-item active" data-section="vertical-section" data-index="0">Wildlife in Action</li>
        <li class="gallery-nav-item" data-section="vertical-section" data-index="1">The Changing Seasons</li>
        <li class="gallery-nav-item" data-section="vertical-section" data-index="2">Guardians of Nature</li>
        <li class="gallery-nav-item" data-section="vertical-section" data-index="3">Astral Aesthetics</li>
        <li class="gallery-nav-item" data-section="horizontal-section" data-index="0">Wildlife Landscapes</li>
        <li class="gallery-nav-item" data-section="horizontal-section" data-index="1">Nature's Symphony</li>
        <li class="gallery-nav-item" data-section="horizontal-section" data-index="2">Nature's Masterpieces</li>
        <li class="gallery-nav-item" data-section="horizontal-section" data-index="3">The Power of Nature</li>
      </ul>
    </div>

    <div class="gallery-content">
      <div class="gallery-container">
        <!-- Content will be loaded dynamically -->
        <div class="gallery-info">
          <h1>Select a topic from the sidebar</h1>
          <p>View beautiful imagery and read detailed content about each topic.</p>
        </div>
      </div>
    </div>
  </main>

  <div class="gallery-lightbox" id="gallery-lightbox">
    <div class="lightbox-content">
      <img src="" alt="Enlarged image" id="lightbox-image">
      <div class="lightbox-controls">
        <button class="lightbox-btn" id="download-image" title="Download image (Disabled)">
          <i class="fas fa-download"></i>
        </button>
        <button class="lightbox-btn" id="share-image" title="Share image">
          <i class="fas fa-share-alt"></i>
        </button>
        <button class="lightbox-btn" id="toggle-protect" title="Toggle image protection">
          <i class="fas fa-shield-alt"></i>
        </button>
      </div>
      <button class="close-lightbox" id="close-lightbox">
        <i class="fas fa-times"></i>
      </button>
    </div>
  </div>

  <!-- Security Notice Modal -->
  <div class="security-modal" id="security-modal">
    <div class="security-modal-content">
      <h2><i class="fas fa-shield-alt"></i> Content Protection</h2>
      <p>This gallery has security features enabled to protect the content:</p>
      <ul>
        <li><i class="fas fa-mouse-pointer"></i> Right-click is disabled to prevent unauthorized saving</li>
        <li><i class="fas fa-camera"></i> Screenshot detection is active</li>
        <li><i class="fas fa-copy"></i> Content copying is restricted</li>
      </ul>
      <p>These measures help protect the intellectual property of Vrindopnishad.</p>
      <div class="security-options">
        <label class="toggle-switch">
          <input type="checkbox" id="security-enabled" checked>
          <span class="toggle-slider"></span>
          <span class="toggle-label">Keep Protection Enabled</span>
        </label>
      </div>
      <div class="security-actions">
        <button id="security-understand">I Understand</button>
      </div>
      <small>Note: To share content legitimately, please use the share buttons provided.</small>
    </div>
  </div>

  <!-- Music Player -->
  <div class="music-player" id="music-player">
    <div class="music-player-inner">
      <div class="track-info">
        <div class="track-title">Select a track</div>
        <div class="track-artist">â€”</div>
      </div>
      <div class="player-controls">
        <button class="player-button" id="player-previous" title="Previous track">
          <i class="fas fa-step-backward"></i>
        </button>
        <button class="player-button main-control" id="player-toggle" title="Play/Pause">
          <i class="fas fa-play"></i>
        </button>
        <button class="player-button" id="player-next" title="Next track">
          <i class="fas fa-step-forward"></i>
        </button>
      </div>
      <div class="player-progress">
        <div class="progress-time current-time">0:00</div>
        <div class="progress-bar">
          <div class="progress-filled"></div>
        </div>
        <div class="progress-time duration">0:00</div>
      </div>
    </div>
    <button class="player-toggle-button" id="toggle-player">
      <i class="fas fa-music"></i>
    </button>
  </div>
  
  <!-- Audio Container -->
  <div class="audio-container">
    <!-- Background music -->
    <audio id="gallery-background-music" loop preload="none">
      <source src="https://cdn.pixabay.com/download/audio/2023/04/05/audio_68d90fcd9d.mp3?filename=ambient-piano-amp-strings-10711.mp3" type="audio/mp3">
    </audio>
  </div>

  <div class="notifications" id="notifications"></div>

  <script src="gallery.js"></script>
  <script>
    // Enhanced Gallery Functionality
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize security features
      initSecurity();
      
      // Initialize music player
      initMusicPlayer();
      
      // Handle theme toggle
      const themeToggle = document.getElementById('toggle-theme');
      if (themeToggle) {
        // Check saved theme
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
          document.body.classList.add('dark-mode');
          themeToggle.innerHTML = '<i class="fas fa-sun"></i><span>Light</span>';
        }
        
        themeToggle.addEventListener('click', function() {
          document.body.classList.toggle('dark-mode');
          
          if (document.body.classList.contains('dark-mode')) {
            localStorage.setItem('theme', 'dark');
            themeToggle.innerHTML = '<i class="fas fa-sun"></i><span>Light</span>';
          } else {
            localStorage.setItem('theme', 'light');
            themeToggle.innerHTML = '<i class="fas fa-moon"></i><span>Dark</span>';
          }
        });
      }
      
      // Share gallery functionality
      const shareGalleryBtn = document.getElementById('share-gallery');
      if (shareGalleryBtn) {
        shareGalleryBtn.addEventListener('click', function() {
          if (window.sharePage && typeof window.sharePage === 'function') {
            window.sharePage(
              'Vrindopnishad Gallery',
              'Explore the beautiful gallery of Vrindopnishad',
              window.location.href
            );
          } else {
            // Fallback sharing
            if (navigator.share) {
              navigator.share({
                title: 'Vrindopnishad Gallery',
                text: 'Explore the beautiful gallery of Vrindopnishad',
                url: window.location.href
              }).catch(err => {
                console.error('Share failed:', err);
                alert('Could not share gallery. Copy this link: ' + window.location.href);
              });
            } else {
              prompt('Copy this link to share the gallery:', window.location.href);
            }
          }
        });
      }
      
      // Security modal
      const securityModal = document.getElementById('security-modal');
      const securityUnderstandBtn = document.getElementById('security-understand');
      const securityEnabledToggle = document.getElementById('security-enabled');
      const toggleSecurityBtn = document.getElementById('toggle-security');
      
      // Show security modal on first visit
      if (!localStorage.getItem('security_notice_shown')) {
        securityModal.classList.add('active');
        localStorage.setItem('security_notice_shown', 'true');
      }
      
      // Close security modal
      if (securityUnderstandBtn) {
        securityUnderstandBtn.addEventListener('click', function() {
          securityModal.classList.remove('active');
        });
      }
      
      // Toggle security
      if (securityEnabledToggle) {
        // Check saved preference
        const securityEnabled = localStorage.getItem('security_enabled') !== 'false';
        securityEnabledToggle.checked = securityEnabled;
        
        securityEnabledToggle.addEventListener('change', function() {
          const enabled = this.checked;
          localStorage.setItem('security_enabled', enabled);
          toggleSecurityFeatures(enabled);
          
          if (window.NotificationManager) {
            window.NotificationManager.show(
              enabled ? 'Content protection enabled' : 'Content protection disabled',
              enabled ? 'success' : 'info'
            );
          }
        });
      }
      
      // Toggle security button
      if (toggleSecurityBtn) {
        toggleSecurityBtn.addEventListener('click', function() {
          securityModal.classList.add('active');
        });
      }
    });
    
    // Initialize security features
    function initSecurity() {
      const securityEnabled = localStorage.getItem('security_enabled') !== 'false';
      toggleSecurityFeatures(securityEnabled);
      
      // Update security icon
      const toggleSecurityBtn = document.getElementById('toggle-security');
      if (toggleSecurityBtn) {
        if (securityEnabled) {
          toggleSecurityBtn.classList.add('active');
          toggleSecurityBtn.querySelector('i').classList.add('fa-shield-alt');
          toggleSecurityBtn.querySelector('i').classList.remove('fa-shield');
        } else {
          toggleSecurityBtn.classList.remove('active');
          toggleSecurityBtn.querySelector('i').classList.remove('fa-shield-alt');
          toggleSecurityBtn.querySelector('i').classList.add('fa-shield');
        }
      }
    }
    
    // Toggle security features
    function toggleSecurityFeatures(enabled) {
      // Access the security functions from the loaded scripts
      if (window.DisableRightClick && typeof window.DisableRightClick.toggle === 'function') {
        window.DisableRightClick.toggle(enabled);
      }
      
      if (window.ScreenshotProtection && typeof window.ScreenshotProtection.toggle === 'function') {
        window.ScreenshotProtection.toggle(enabled);
      }
      
      // Update security icon
      const toggleSecurityBtn = document.getElementById('toggle-security');
      if (toggleSecurityBtn) {
        if (enabled) {
          toggleSecurityBtn.classList.add('active');
          toggleSecurityBtn.querySelector('i').classList.add('fa-shield-alt');
          toggleSecurityBtn.querySelector('i').classList.remove('fa-shield');
        } else {
          toggleSecurityBtn.classList.remove('active');
          toggleSecurityBtn.querySelector('i').classList.remove('fa-shield-alt');
          toggleSecurityBtn.querySelector('i').classList.add('fa-shield');
        }
      }
    }
    
    // Initialize music player
    function initMusicPlayer() {
      const musicToggleBtn = document.getElementById('toggle-music');
      const galleryMusic = document.getElementById('gallery-background-music');
      
      if (musicToggleBtn && galleryMusic) {
        musicToggleBtn.addEventListener('click', function() {
          if (galleryMusic.paused) {
            try {
              const playPromise = galleryMusic.play();
              if (playPromise !== undefined) {
                playPromise.then(() => {
                  musicToggleBtn.classList.add('active');
                  musicToggleBtn.innerHTML = '<i class="fas fa-volume-up"></i><span>Mute</span>';
                  if (window.NotificationManager) {
                    window.NotificationManager.show('Background music started', 'success');
                  }
                }).catch(err => {
                  console.error('Music play error:', err);
                  if (window.NotificationManager) {
                    window.NotificationManager.show('Click again to play music. Browser requires interaction.', 'info');
                  }
                });
              }
            } catch (e) {
              console.error('Music error:', e);
            }
          } else {
            galleryMusic.pause();
            musicToggleBtn.classList.remove('active');
            musicToggleBtn.innerHTML = '<i class="fas fa-music"></i><span>Music</span>';
            if (window.NotificationManager) {
              window.NotificationManager.show('Background music paused', 'info');
            }
          }
        });
        
        // Set initial volume
        galleryMusic.volume = 0.3;
      }
    }
  </script>
</body>
</html> 