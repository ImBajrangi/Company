<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vrindopnishad - Data Manager</title>
    <link rel="stylesheet" href="/Pictures/css/unified.css">
</head>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #000000 0%, #2a5298 100%);
        min-height: 100vh;
        color: #000000;
    }

    .container {
        max-width: 1600px;
        margin: 0 auto;
        padding: 20px;
    }

    .header {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 16px;
        padding: 24px;
        margin-bottom: 24px;
        box-shadow: 0 8px 32px rgba(43, 2, 157, 0.37);
        text-align: center;
    }

    .header h1 {
        font-size: 2.5rem;
        font-weight: 700;
        background: linear-gradient(135deg, #000d24, #2a5298);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 8px;
    }

    .header p {
        color: #000000;
        font-size: 1.1rem;
    }

    .tabs {
        display: flex;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 12px;
        padding: 8px;
        margin-bottom: 24px;
        overflow-x: auto;
    }

    .tab {
        flex: 1;
        min-width: 120px;
        padding: 12px 16px;
        background: none;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.2s ease;
        text-align: center;
    }

    .tab.active {
        background: linear-gradient(135deg, #1e3c72, #2a5298);
        color: rgb(255, 255, 255);
    }

    .tab:hover:not(.active) {
        background: rgba(0, 32, 90, 0.1);
    }

    .content-section {
        display: none;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
    }

    .content-section.active {
        display: block;
    }

    .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 24px;
        margin-bottom: 24px;
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #333;
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #e1e5e9;
        border-radius: 8px;
        font-size: 14px;
        transition: all 0.2s ease;
        background: white;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
        outline: none;
        border-color: #1e3c72;
        box-shadow: 0 0 0 3px rgba(30, 60, 114, 0.1);
    }

    .form-group textarea {
        resize: vertical;
        min-height: 100px;
        font-family: inherit;
    }

    .btn {
        background: linear-gradient(135deg, #1e3c72, #2a5298);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        margin-right: 12px;
        margin-bottom: 12px;
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(30, 60, 114, 0.4);
    }

    .btn-secondary { background: #6c757d; }
    .btn-success { background: #28a745; }
    .btn-danger { background: #dc3545; }
    .btn-warning { background: #ffc107; color: #333; }

    .data-preview {
        background: #f8f9fa;
        border: 2px solid #e9ecef;
        border-radius: 8px;
        padding: 16px;
        margin-top: 20px;
        max-height: 400px;
        overflow-y: auto;
    }

    .data-preview pre {
        margin: 0;
        font-size: 12px;
        line-height: 1.4;
    }

    .item-list {
        display: grid;
        gap: 16px;
        margin-top: 20px;
    }

    .item-card {
        background: white;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 16px;
        transition: all 0.2s ease;
    }

    .item-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
    }

    .item-title {
        font-weight: 600;
        color: #333;
    }

    .item-actions {
        display: flex;
        gap: 8px;
    }

    .api-endpoint {
        background: #e7f3ff;
        border: 1px solid #b6d7ff;
        border-radius: 8px;
        padding: 16px;
        margin-bottom: 20px;
        font-family: monospace;
        font-size: 14px;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        margin-bottom: 24px;
    }

    .stat-card {
        background: rgba(255, 255, 255, 0.9);
        padding: 20px;
        border-radius: 12px;
        text-align: center;
        border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .stat-number {
        font-size: 2rem;
        font-weight: 700;
        background: linear-gradient(135deg, #1e3c72, #2a5298);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .stat-label {
        color: #666;
        font-size: 14px;
        margin-top: 4px;
    }

    .toolbar {
        display: flex;
        gap: 12px;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }

    @media (max-width: 768px) {
        .form-grid {
            grid-template-columns: 1fr;
        }
        
        .container {
            padding: 16px;
        }
        
        .header h1 {
            font-size: 2rem;
        }
        
        .tabs {
            flex-direction: column;
        }
    }

    /* Custom Modal Styles */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
    }

    .modal-overlay.active {
        opacity: 1;
        visibility: visible;
    }

    .modal {
        background: white;
        border-radius: 12px;
        padding: 24px;
        max-width: 90%;
        width: 400px;
        transform: scale(0.8) translateY(-20px);
        transition: all 0.3s ease;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }

    .modal-overlay.active .modal {
        transform: scale(1) translateY(0);
    }

    .modal-header {
        margin-bottom: 16px;
    }

    .modal-title {
        font-size: 1.2rem;
        font-weight: 600;
        color: #333;
        margin-bottom: 8px;
    }

    .modal-message {
        color: #666;
        line-height: 1.4;
    }

    .modal-input {
        width: 100%;
        padding: 12px;
        border: 2px solid #e1e5e9;
        border-radius: 8px;
        font-size: 14px;
        margin: 12px 0;
    }

    .modal-actions {
        display: flex;
        gap: 12px;
        justify-content: flex-end;
        margin-top: 20px;
    }

    .modal-btn {
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        min-width: 80px;
    }

    .modal-btn-primary {
        background: linear-gradient(135deg, #1e3c72, #2a5298);
        color: white;
    }

    .modal-btn-secondary {
        background: #6c757d;
        color: white;
    }

    .modal-btn-danger {
        background: #dc3545;
        color: white;
    }

    .modal-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }
</style>
<body>
    <!-- Custom Modal -->
    <div class="modal-overlay" id="customModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle"></div>
                <div class="modal-message" id="modalMessage"></div>
            </div>
            <input type="text" class="modal-input" id="modalInput" style="display: none;">
            <div class="modal-actions">
                <button class="modal-btn modal-btn-secondary" id="modalCancel">Cancel</button>
                <button class="modal-btn modal-btn-primary" id="modalConfirm">OK</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>Unified Web Data Manager</h1>
            <p>Centralized data management system for all your web pages</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="totalBooks">0</div>
                <div class="stat-label">Books</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalImages">0</div>
                <div class="stat-label">Images</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalAudio">0</div>
                <div class="stat-label">Audio Tracks</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalContent">0</div>
                <div class="stat-label">Content Items</div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('books')">Books</button>
            <button class="tab" onclick="showTab('images')">Images</button>
            <button class="tab" onclick="showTab('audio')">Audio</button>
            <button class="tab" onclick="showTab('collections')">Collections</button>
            <button class="tab" onclick="showTab('content')">Content</button>
            <button class="tab" onclick="showTab('api')">API & Export</button>
        </div>

        <!-- Books Section -->
        <div id="books" class="content-section active">
            <h2>Books Management</h2>
            <div class="form-grid">
                <div>
                    <h3>Add New Book</h3>
                    <form id="bookForm">
                        <div class="form-group">
                            <label>Title</label>
                            <input type="text" id="bookTitle" required>
                        </div>
                        <div class="form-group">
                            <label>Author</label>
                            <input type="text" id="bookAuthor" required>
                        </div>
                        <div class="form-group">
                            <label>Year</label>
                            <input type="text" id="bookYear">
                        </div>
                        <div class="form-group">
                            <label>Category</label>
                            <select id="bookCategory">
                                <option value="vedic">Vedic</option>
                                <option value="puranas">Puranas</option>
                                <option value="modern">Modern</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Language</label>
                            <select id="bookLanguage">
                                <option value="sanskrit">Sanskrit</option>
                                <option value="english">English</option>
                                <option value="hindi">Hindi</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Cover Image URL</label>
                            <input type="url" id="bookCover">
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="bookDescription"></textarea>
                        </div>
                        <button type="submit" class="btn">Add Book</button>
                    </form>
                </div>
                <div>
                    <h3>Books List</h3>
                    <div id="booksList" class="item-list"></div>
                </div>
            </div>
        </div>

        <!-- Images Section -->
        <div id="images" class="content-section">
            <h2>Images Management</h2>
            <div class="form-grid">
                <div>
                    <h3>Add New Image</h3>
                    <form id="imageForm">
                        <div class="form-group">
                            <label>Title</label>
                            <input type="text" id="imageTitle" required>
                        </div>
                        <div class="form-group">
                            <label>Image URL</label>
                            <input type="url" id="imageSrc" required>
                        </div>
                        <div class="form-group">
                            <label>Category</label>
                            <select id="imageCategory">
                                <option value="anime">Anime</option>
                                <option value="landscape">Landscape</option>
                                <option value="nature">Nature</option>
                                <option value="spiritual">Spiritual</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Alt Text</label>
                            <input type="text" id="imageAlt">
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="imageDescription"></textarea>
                        </div>
                        <button type="submit" class="btn">Add Image</button>
                    </form>
                </div>
                <div>
                    <h3>Images List</h3>
                    <div id="imagesList" class="item-list"></div>
                </div>
            </div>
        </div>

        <!-- Audio Section -->
        <div id="audio" class="content-section">
            <h2>Audio Management</h2>
            <div class="form-grid">
                <div>
                    <h3>Add New Audio</h3>
                    <form id="audioForm">
                        <div class="form-group">
                            <label>Title</label>
                            <input type="text" id="audioTitle" required>
                        </div>
                        <div class="form-group">
                            <label>Audio URL</label>
                            <input type="url" id="audioSrc" required>
                        </div>
                        <div class="form-group">
                            <label>Artist</label>
                            <input type="text" id="audioArtist">
                        </div>
                        <div class="form-group">
                            <label>Duration</label>
                            <input type="text" id="audioDuration" placeholder="2:45">
                        </div>
                        <div class="form-group">
                            <label>Category</label>
                            <select id="audioCategory">
                                <option value="Nature">Nature</option>
                                <option value="Meditation">Meditation</option>
                                <option value="Ambient">Ambient</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="audioDescription"></textarea>
                        </div>
                        <button type="submit" class="btn">Add Audio</button>
                    </form>
                </div>
                <div>
                    <h3>Audio List</h3>
                    <div id="audioList" class="item-list"></div>
                </div>
            </div>
        </div>

        <!-- Collections Section -->
        <div id="collections" class="content-section">
            <h2>Collections Management</h2>
            <div class="toolbar">
                <button class="btn" onclick="addCollection()">Add Collection</button>
                <button class="btn btn-secondary" onclick="viewCollections()">View All</button>
            </div>
            <div id="collectionsContent"></div>
        </div>

        <!-- Content Section -->
        <div id="content" class="content-section">
            <h2>Content Management</h2>
            <div class="form-grid">
                <div>
                    <h3>Add New Content</h3>
                    <form id="contentForm">
                        <div class="form-group">
                            <label>Title</label>
                            <input type="text" id="contentTitle" required>
                        </div>
                        <div class="form-group">
                            <label>Type</label>
                            <select id="contentType">
                                <option value="page">Page</option>
                                <option value="post">Post</option>
                                <option value="article">Article</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Status</label>
                            <select id="contentStatus">
                                <option value="draft">Draft</option>
                                <option value="published">Published</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Excerpt</label>
                            <textarea id="contentExcerpt"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Content</label>
                            <textarea id="contentBody" rows="6"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Tags (comma-separated)</label>
                            <input type="text" id="contentTags">
                        </div>
                        <button type="submit" class="btn">Add Content</button>
                    </form>
                </div>
                <div>
                    <h3>Content List</h3>
                    <div id="contentList" class="item-list"></div>
                </div>
            </div>
        </div>

        <!-- API & Export Section -->
        <div id="api" class="content-section">
            <h2>API & Data Export</h2>
            
            <div class="api-endpoint">
                <h3>JavaScript API Usage:</h3>
                <pre>// Get all data
const allData = UnifiedDataManager.getAllData();

// Get specific data type
const books = UnifiedDataManager.getBooks();
const images = UnifiedDataManager.getImages();
const audio = UnifiedDataManager.getAudio();
const content = UnifiedDataManager.getContent();

// Filter data
const vedic_books = UnifiedDataManager.getBooks('vedic');
const anime_images = UnifiedDataManager.getImages('anime');</pre>
            </div>

            <div class="toolbar">
                <button class="btn" onclick="exportAllData()">Export All Data</button>
                <button class="btn btn-secondary" onclick="exportBooks()">Export Books Only</button>
                <button class="btn btn-secondary" onclick="exportImages()">Export Images Only</button>
                <button class="btn btn-secondary" onclick="exportAudio()">Export Audio Only</button>
                <button class="btn btn-warning" onclick="importData()">Import Data</button>
                <button class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
            </div>

            <div class="data-preview">
                <h3>Current Data Structure:</h3>
                <pre id="dataPreview">Loading...</pre>
            </div>
        </div>
    </div>

    <script>
        // Custom Modal Functions
        function showConfirm(title, message) {
            return new Promise((resolve) => {
                const modal = document.getElementById('customModal');
                const modalTitle = document.getElementById('modalTitle');
                const modalMessage = document.getElementById('modalMessage');
                const modalInput = document.getElementById('modalInput');
                const modalConfirm = document.getElementById('modalConfirm');
                const modalCancel = document.getElementById('modalCancel');

                modalTitle.textContent = title;
                modalMessage.textContent = message;
                modalInput.style.display = 'none';
                modalConfirm.textContent = 'Delete';
                modalConfirm.className = 'modal-btn modal-btn-danger';

                modal.classList.add('active');
                document.body.style.overflow = 'hidden';

                const handleConfirm = () => {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                    cleanup();
                    resolve(true);
                };

                const handleCancel = () => {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                    cleanup();
                    resolve(false);
                };

                const cleanup = () => {
                    modalConfirm.removeEventListener('click', handleConfirm);
                    modalCancel.removeEventListener('click', handleCancel);
                    modal.removeEventListener('click', handleOverlayClick);
                };

                const handleOverlayClick = (e) => {
                    if (e.target === modal) {
                        handleCancel();
                    }
                };

                modalConfirm.addEventListener('click', handleConfirm);
                modalCancel.addEventListener('click', handleCancel);
                modal.addEventListener('click', handleOverlayClick);
            });
        }

        function showPrompt(title, message, defaultValue = '') {
            return new Promise((resolve) => {
                const modal = document.getElementById('customModal');
                const modalTitle = document.getElementById('modalTitle');
                const modalMessage = document.getElementById('modalMessage');
                const modalInput = document.getElementById('modalInput');
                const modalConfirm = document.getElementById('modalConfirm');
                const modalCancel = document.getElementById('modalCancel');

                modalTitle.textContent = title;
                modalMessage.textContent = message;
                modalInput.style.display = 'block';
                modalInput.value = defaultValue;
                modalConfirm.textContent = 'OK';
                modalConfirm.className = 'modal-btn modal-btn-primary';

                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // Focus input after animation
                setTimeout(() => modalInput.focus(), 300);

                const handleConfirm = () => {
                    const value = modalInput.value.trim();
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                    cleanup();
                    resolve(value || null);
                };

                const handleCancel = () => {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                    cleanup();
                    resolve(null);
                };

                const cleanup = () => {
                    modalConfirm.removeEventListener('click', handleConfirm);
                    modalCancel.removeEventListener('click', handleCancel);
                    modalInput.removeEventListener('keypress', handleKeyPress);
                    modal.removeEventListener('click', handleOverlayClick);
                };

                const handleKeyPress = (e) => {
                    if (e.key === 'Enter') {
                        handleConfirm();
                    }
                };

                const handleOverlayClick = (e) => {
                    if (e.target === modal) {
                        handleCancel();
                    }
                };

                modalConfirm.addEventListener('click', handleConfirm);
                modalCancel.addEventListener('click', handleCancel);
                modalInput.addEventListener('keypress', handleKeyPress);
                modal.addEventListener('click', handleOverlayClick);
            });
        }

        // Unified Data Manager
        class UnifiedDataManager {
            constructor() {
                this.data = this.loadData();
            }

            loadData() {
                const defaultData = {
                    books: [],
                    images: [],
                    audio: [],
                    collections: {
                        featured: { title: "Featured Collections", items: [] },
                        popular: { title: "Popular Right Now", items: [] },
                        nature: { title: "Nature & Landscapes", items: [] },
                        anime: { title: "Anime & Art", items: [] },
                        architecture: { title: "Architecture & Urban", items: [] }
                    },
                    content: [],
                    siteConfig: {
                        siteName: "Vrindopnishad",
                        tagline: "Spiritual & Divine Collection",
                        description: "Discover sacred images and divine artworks that inspire the soul."
                    }
                };

                const stored = localStorage.getItem('unifiedWebData');
                return stored ? JSON.parse(stored) : defaultData;
            }

            saveData() {
                localStorage.setItem('unifiedWebData', JSON.stringify(this.data));
                this.updatePreview();
                this.updateStats();
            }

            // Books methods
            addBook(book) {
                book.id = Date.now();
                book.readingProgress = 0;
                this.data.books.push(book);
                this.saveData();
            }

            getBooks(category = null) {
                return category ? 
                    this.data.books.filter(book => book.category === category) : 
                    this.data.books;
            }

            deleteBook(id) {
                this.data.books = this.data.books.filter(book => book.id !== id);
                this.saveData();
            }

            // Images methods
            addImage(image) {
                image.id = Date.now().toString();
                this.data.images.push(image);
                this.saveData();
            }

            getImages(category = null) {
                return category ? 
                    this.data.images.filter(image => image.category === category) : 
                    this.data.images;
            }

            deleteImage(id) {
                this.data.images = this.data.images.filter(image => image.id !== id);
                this.saveData();
            }

            // Audio methods
            addAudio(audio) {
                audio.id = Date.now().toString();
                this.data.audio.push(audio);
                this.saveData();
            }

            getAudio(category = null) {
                return category ? 
                    this.data.audio.filter(audio => audio.category === category) : 
                    this.data.audio;
            }

            deleteAudio(id) {
                this.data.audio = this.data.audio.filter(audio => audio.id !== id);
                this.saveData();
            }

            // Content methods
            addContent(content) {
                content.id = Date.now();
                content.created = new Date().toISOString();
                content.modified = new Date().toISOString();
                this.data.content.push(content);
                this.saveData();
            }

            getContent(status = null) {
                return status ? 
                    this.data.content.filter(content => content.status === status) : 
                    this.data.content;
            }

            deleteContent(id) {
                this.data.content = this.data.content.filter(content => content.id !== id);
                this.saveData();
            }

            // General methods
            getAllData() {
                return this.data;
            }

            exportData(type = 'all') {
                let exportData;
                let filename;

                switch(type) {
                    case 'books':
                        exportData = { books: this.data.books };
                        filename = 'books-data.json';
                        break;
                    case 'images':
                        exportData = { images: this.data.images };
                        filename = 'images-data.json';
                        break;
                    case 'audio':
                        exportData = { audio: this.data.audio };
                        filename = 'audio-data.json';
                        break;
                    default:
                        exportData = this.data;
                        filename = 'unified-data.json';
                }

                const dataStr = JSON.stringify(exportData, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', filename);
                linkElement.click();
            }

            importData(importedData) {
                if (importedData.books) this.data.books = [...this.data.books, ...importedData.books];
                if (importedData.images) this.data.images = [...this.data.images, ...importedData.images];
                if (importedData.audio) this.data.audio = [...this.data.audio, ...importedData.audio];
                if (importedData.content) this.data.content = [...this.data.content, ...importedData.content];
                this.saveData();
            }

            clearData() {
                this.data = {
                    books: [],
                    images: [],
                    audio: [],
                    collections: { featured: { items: [] }, popular: { items: [] } },
                    content: []
                };
                this.saveData();
            }

            updatePreview() {
                document.getElementById('dataPreview').textContent = JSON.stringify(this.data, null, 2);
            }

            updateStats() {
                document.getElementById('totalBooks').textContent = this.data.books.length;
                document.getElementById('totalImages').textContent = this.data.images.length;
                document.getElementById('totalAudio').textContent = this.data.audio.length;
                document.getElementById('totalContent').textContent = this.data.content.length;
            }
        }

        // Initialize the manager
        const dataManager = new UnifiedDataManager();

        // Tab functionality
        function showTab(tabName) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected section
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // Load data for the tab
            switch(tabName) {
                case 'books':
                    displayBooks();
                    break;
                case 'images':
                    displayImages();
                    break;
                case 'audio':
                    displayAudio();
                    break;
                case 'content':
                    displayContent();
                    break;
                case 'api':
                    dataManager.updatePreview();
                    break;
            }
        }

        // Books functionality
        document.getElementById('bookForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const book = {
                title: document.getElementById('bookTitle').value,
                author: document.getElementById('bookAuthor').value,
                year: document.getElementById('bookYear').value,
                category: document.getElementById('bookCategory').value,
                language: document.getElementById('bookLanguage').value,
                cover: document.getElementById('bookCover').value,
                description: document.getElementById('bookDescription').value,
                format: ["pdf", "epub"]
            };
            dataManager.addBook(book);
            this.reset();
            displayBooks();
        });

        function displayBooks() {
            const books = dataManager.getBooks();
            const container = document.getElementById('booksList');
            container.innerHTML = books.map(book => `
                <div class="item-card">
                    <div class="item-header">
                        <div class="item-title">${book.title}</div>
                        <div class="item-actions">
                            <button class="btn btn-danger" onclick="deleteBook(${book.id})">Delete</button>
                        </div>
                    </div>
                    <p><strong>Author:</strong> ${book.author} | <strong>Year:</strong> ${book.year}</p>
                    <p><strong>Category:</strong> ${book.category} | <strong>Language:</strong> ${book.language}</p>
                    <p>${book.description}</p>
                </div>
            `).join('');
        }

        async function deleteBook(id) {
            const confirmed = await showConfirm('Delete Book', 'Are you sure you want to delete this book? This action cannot be undone.');
            if (confirmed) {
                dataManager.deleteBook(id);
                displayBooks();
            }
        }

        // Images functionality
        document.getElementById('imageForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const image = {
                title: document.getElementById('imageTitle').value,
                src: document.getElementById('imageSrc').value,
                category: document.getElementById('imageCategory').value,
                alt: document.getElementById('imageAlt').value,
                description: document.getElementById('imageDescription').value
            };
            dataManager.addImage(image);
            this.reset();
            displayImages();
        });

        function displayImages() {
            const images = dataManager.getImages();
            const container = document.getElementById('imagesList');
            container.innerHTML = images.map(image => `
                <div class="item-card">
                    <div class="item-header">
                        <div class="item-title">${image.title}</div>
                        <div class="item-actions">
                            <button class="btn btn-danger" onclick="deleteImage('${image.id}')">Delete</button>
                        </div>
                    </div>
                    <p><strong>Category:</strong> ${image.category}</p>
                    <p>${image.description}</p>
                    <img src="${image.src}" alt="${image.alt}" style="max-width: 100px; height: auto; border-radius: 4px;">
                </div>
            `).join('');
        }

        async function deleteImage(id) {
            const confirmed = await showConfirm('Delete Image', 'Are you sure you want to delete this image? This action cannot be undone.');
            if (confirmed) {
                dataManager.deleteImage(id);
                displayImages();
            }
        }

        // Audio functionality
        document.getElementById('audioForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const audio = {
                title: document.getElementById('audioTitle').value,
                audioSrc: document.getElementById('audioSrc').value,
                artist: document.getElementById('audioArtist').value,
                duration: document.getElementById('audioDuration').value,
                category: document.getElementById('audioCategory').value,
                description: document.getElementById('audioDescription').value
            };
            dataManager.addAudio(audio);
            this.reset();
            displayAudio();
        });

        function displayAudio() {
            const audioList = dataManager.getAudio();
            const container = document.getElementById('audioList');
            container.innerHTML = audioList.map(audio => `
                <div class="item-card">
                    <div class="item-header">
                        <div class="item-title">${audio.title}</div>
                        <div class="item-actions">
                            <button class="btn btn-danger" onclick="deleteAudio('${audio.id}')">Delete</button>
                        </div>
                    </div>
                    <p><strong>Artist:</strong> ${audio.artist} | <strong>Duration:</strong> ${audio.duration}</p>
                    <p><strong>Category:</strong> ${audio.category}</p>
                    <p>${audio.description}</p>
                </div>
            `).join('');
        }

        async function deleteAudio(id) {
            const confirmed = await showConfirm('Delete Audio', 'Are you sure you want to delete this audio? This action cannot be undone.');
            if (confirmed) {
                dataManager.deleteAudio(id);
                displayAudio();
            }
        }

        // Content functionality
        document.getElementById('contentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const content = {
                title: document.getElementById('contentTitle').value,
                type: document.getElementById('contentType').value,
                status: document.getElementById('contentStatus').value,
                excerpt: document.getElementById('contentExcerpt').value,
                content: document.getElementById('contentBody').value,
                tags: document.getElementById('contentTags').value.split(',').map(tag => tag.trim()).filter(tag => tag)
            };
            dataManager.addContent(content);
            this.reset();
            displayContent();
        });

        function displayContent() {
            const content = dataManager.getContent();
            const container = document.getElementById('contentList');
            container.innerHTML = content.map(item => `
                <div class="item-card">
                    <div class="item-header">
                        <div class="item-title">${item.title}</div>
                        <div class="item-actions">
                            <button class="btn btn-danger" onclick="deleteContent(${item.id})">Delete</button>
                        </div>
                    </div>
                    <p><strong>Type:</strong> ${item.type} | <strong>Status:</strong> ${item.status}</p>
                    <p><strong>Tags:</strong> ${item.tags.join(', ')}</p>
                    <p>${item.excerpt}</p>
                </div>
            `).join('');
        }

        async function deleteContent(id) {
            const confirmed = await showConfirm('Delete Content', 'Are you sure you want to delete this content? This action cannot be undone.');
            if (confirmed) {
                dataManager.deleteContent(id);
                displayContent();
            }
        }

        // Collections functionality
        async function addCollection() {
            const name = await showPrompt('New Collection', 'Enter a name for your new collection:');
            if (name) {
                if (!dataManager.data.collections[name.toLowerCase()]) {
                    dataManager.data.collections[name.toLowerCase()] = {
                        title: name,
                        items: [],
                        created: new Date().toISOString()
                    };
                    dataManager.saveData();
                    await showConfirm('Success', 'Collection added successfully!');
                    viewCollections();
                } else {
                    await showConfirm('Error', 'A collection with this name already exists. Please choose a different name.');
                }
            }
        }

        function viewCollections() {
            const collections = dataManager.data.collections;
            const container = document.getElementById('collectionsContent');
            container.innerHTML = Object.keys(collections).map(key => `
                <div class="item-card">
                    <div class="item-header">
                        <div class="item-title">${collections[key].title}</div>
                        <div class="item-actions">
                            <button class="btn" onclick="editCollection('${key}')">Edit</button>
                            <button class="btn btn-danger" onclick="deleteCollection('${key}')">Delete</button>
                        </div>
                    </div>
                    <p>Items: ${collections[key].items ? collections[key].items.length : 0}</p>
                    <p class="item-meta">Created: ${new Date(collections[key].created || Date.now()).toLocaleDateString()}</p>
                </div>
            `).join('');
        }

        async function editCollection(key) {
            const collection = dataManager.data.collections[key];
            const newName = await showPrompt('Edit Collection', 'Enter new name for collection:', collection.title);
            
            if (newName && newName !== collection.title) {
                const newKey = newName.toLowerCase();
                
                if (!dataManager.data.collections[newKey]) {
                    // Create new collection with updated name
                    dataManager.data.collections[newKey] = {
                        ...collection,
                        title: newName,
                        modified: new Date().toISOString()
                    };
                    
                    // Delete old collection
                    delete dataManager.data.collections[key];
                    
                    // Save and update view
                    dataManager.saveData();
                    await showConfirm('Success', 'Collection name updated successfully!');
                    viewCollections();
                } else {
                    await showConfirm('Error', 'A collection with this name already exists. Please choose a different name.');
                }
            }
        }

        async function deleteCollection(key) {
            const collection = dataManager.data.collections[key];
            const confirmed = await showConfirm(
                'Delete Collection',
                `Are you sure you want to delete the collection "${collection.title}"? This action cannot be undone.`
            );
            
            if (confirmed) {
                delete dataManager.data.collections[key];
                dataManager.saveData();
                await showConfirm('Success', 'Collection deleted successfully!');
                viewCollections();
            }
        }

        // Export functions
        function exportAllData() {
            dataManager.exportData('all');
        }

        function exportBooks() {
            dataManager.exportData('books');
        }

        function exportImages() {
            dataManager.exportData('images');
        }

        function exportAudio() {
            dataManager.exportData('audio');
        }

        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const importedData = JSON.parse(e.target.result);
                            dataManager.importData(importedData);
                            alert('Data imported successfully!');
                            dataManager.updatePreview();
                        } catch (error) {
                            alert('Error reading file!');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        async function clearAllData() {
            const confirmed = await showConfirm('Clear All Data', 'Are you sure you want to clear ALL data? This will delete everything and cannot be undone!');
            if (confirmed) {
                dataManager.clearData();
                displayBooks();
                displayImages();
                displayAudio();
                displayContent();
                await showConfirm('Complete', 'All data has been cleared!');
            }
        }

        // Make the data manager globally accessible for web pages
        window.UnifiedDataManager = dataManager;

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            dataManager.updateStats();
            dataManager.updatePreview();
            displayBooks();
        });

        // Auto-save every 30 seconds
        setInterval(() => {
            dataManager.saveData();
        }, 30000);
    </script>
    <script>
        // Your existing code can work with minimal changes:
        const books = UnifiedAPI.getBooks('vedic');
        const animeImages = UnifiedAPI.getImages('anime');
        const audioTracks = UnifiedAPI.getAudio('Nature');

        // Or get data in your existing JSON formats:
        const booksData = UnifiedAPI.getBooksData(); // Returns {books: [...]}
        const imagesData = UnifiedAPI.getImagesData(); // Returns {categories: [...], images: [...]}
    </script>
    <script src="/web content manager/js/unified-data-api.js"></script>
</body>
</html>